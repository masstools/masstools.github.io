<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Compressor Tool - Mass Tools</title>
  <meta name="description" content="Compress images (JPG, PNG) for free with Mass Tools' Image Compressor Tool. Reduce file size for web or sharing with adjustable quality, scale, or target size.">
  <meta name="keywords" content="image compressor, mass tools, free online tools, image compression, jpg, png">
  <meta name="robots" content="index, follow">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script async src="https[https://www.googletagmanager.com/gtag/js?id=G-68CX9G7BKF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-68CX9G7BKF');
  </script>
  <style>
    :root {
      --primary-color: #FF4500;
      --secondary-color: #FFA500;
      --dark-color: #1A1A1A;
      --light-color: #F8F9FA;
      --text-color: #2C2C2C;
      --text-light: #6C757D;
      --border-radius: 12px;
      --transition: all 0.3s ease;
      --gradient: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background: var(--light-color);
      color: var(--text-color);
      font-size: 16px;
      line-height: 1.7;
      scrollbar-width: none;
    }

    body::-webkit-scrollbar {
      display: none;
    }

    .progress-bar, [class*="progress"], [id*="progress"] {
      display: none !important;
    }

    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 24px;
    }

    header {
      background: var(--light-color);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .header-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      font-size: 24px;
      font-weight: 800;
      margin-left: 8px;
    }

    .logo-icon {
      font-size: 24px;
      color: var(--primary-color);
    }

    .logo span {
      background: var(--gradient);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    nav ul {
      display: flex;
      list-style: none;
      gap: 16px;
    }

    nav ul li a {
      text-decoration: none;
      color: var(--text-color);
      font-weight: 500;
      font-size: 14px;
      padding: 8px 12px;
      border-radius: var(--border-radius);
      transition: var(--transition);
    }

    nav ul li a:hover {
      background: var(--primary-color);
      color: var(--light-color);
      text-decoration: none;
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 24px;
      color: var(--text-color);
      cursor: pointer;
      margin-right: 8px;
    }

    #mobile-menu-toggle {
      display: none;
    }

    .search-bar {
      display: flex;
      align-items: center;
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 50px;
      padding: 6px 12px;
      transition: var(--transition);
      max-width: 200px;
    }

    .search-bar:hover, .search-bar:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
    }

    .search-bar input {
      border: none;
      outline: none;
      font-size: 13px;
      padding: 6px;
      width: 100%;
    }

    .search-bar button {
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition);
    }

    .search-bar button:hover {
      color: var(--primary-color);
    }

    .tool-section {
      padding: 80px 0;
      background: var(--light-color);
    }

    .tool-content {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      padding: 32px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .tool-content h1 {
      font-size: 36px;
      color: var(--dark-color);
      margin-bottom: 20px;
      text-align: center;
    }

    .tool-content p {
      font-size: 15px;
      color: var(--text-color);
      margin-bottom: 12px;
    }

    .tool-content .upload-area {
      border: 2px dashed var(--text-light);
      border-radius: var(--border-radius);
      padding: 20px;
      text-align: center;
      margin-bottom: 20px;
      transition: var(--transition);
    }

    .tool-content .upload-area:hover {
      border-color: var(--primary-color);
      background: rgba(255, 69, 0, 0.05);
    }

    .tool-content .upload-area.dragover {
      border-color: var(--primary-color);
      background: rgba(255, 69, 0, 0.1);
    }

    .tool-content .upload-area i {
      font-size: 32px;
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .tool-content .upload-area p {
      font-size: 14px;
      color: var(--text-light);
    }

    .tool-content .upload-area input[type="file"] {
      display: none;
    }

    .tool-content .options-control {
      margin-bottom: 20px;
      text-align: center;
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
    }

    .tool-content .options-control label {
      font-size: 14px;
      font-weight: 500;
      margin-right: 10px;
      align-self: center;
    }

    .tool-content .options-control select,
    .tool-content .options-control input[type="number"],
    .tool-content .options-control input[type="range"] {
      padding: 8px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      min-width: 200px;
    }

    .tool-content .options-control input[type="range"] {
      padding: 0;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      cursor: pointer;
    }

    .tool-content .options-control input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      background: var(--primary-color);
      border-radius: 50%;
      cursor: pointer;
    }

    .tool-content .options-control .slider-value {
      font-size: 14px;
      color: var(--text-color);
      margin-left: 10px;
    }

    .tool-content .preview-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }

    .tool-content .preview-box {
      flex: 1;
      min-width: 300px;
      text-align: center;
    }

    .tool-content .preview-box img {
      max-width: 100%;
      height: auto;
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      display: none;
    }

    .tool-content .preview-box img.visible {
      display: block;
    }

    .tool-content .preview-box p {
      font-size: 14px;
      font-weight: 500;
      margin-top: 10px;
    }

    .tool-content .action-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 24px;
    }

    .tool-content .action-buttons button,
    .tool-content .cta-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--gradient);
      color: #FFFFFF !important;
      padding: 10px 24px;
      border: none;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      font-size: 14px;
      transition: var(--transition);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }

    .tool-content .action-buttons button:hover,
    .tool-content .cta-button:hover {
      background: var(--primary-color);
      color: #FFFFFF !important;
      transform: translateY(-4px);
      text-decoration: none;
    }

    .tool-content .action-buttons button:disabled {
      background: var(--text-light);
      color: var(--light-color) !important;
      cursor: not-allowed;
      transform: none;
    }

    .tool-content .loading {
      display: none;
      font-size: 14px;
      color: var(--primary-color);
      margin-top: 10px;
      text-align: center;
    }

    .tool-content .loading.visible {
      display: block;
    }

    .tool-content .tool-article {
      margin-top: 40px;
    }

    .tool-content .tool-article h2 {
      font-size: 24px;
      color: var(--dark-color);
      margin: 24px 0 12px;
    }

    .tool-content .tool-article h3 {
      font-size: 20px;
      color: var(--dark-color);
      margin: 20px 0 10px;
    }

    .tool-content .tool-article p {
      font-size: 15px;
      color: var(--text-color);
      margin-bottom: 12px;
    }

    .tool-content .tool-article ul {
      list-style: none;
      margin: 12px 0;
      padding-left: 20px;
    }

    .tool-content .tool-article ul li {
      font-size: 15px;
      color: var(--text-color);
      margin-bottom: 8px;
      position: relative;
    }

    .tool-content .tool-article ul li::before {
      content: '✔';
      color: var(--primary-color);
      position: absolute;
      left: -20px;
    }

    .tool-content .tool-article a {
      color: var(--primary-color);
      text-decoration: none;
      transition: var(--transition);
    }

    .tool-content .tool-article a:hover {
      text-decoration: underline;
    }

    footer {
      background: var(--dark-color);
      color: var(--light-color);
      padding: 40px 0 20px;
    }

    .footer-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 24px;
      margin-bottom: 24px;
    }

    .footer-column-logo {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      font-size: 24px;
      font-weight: 800;
    }

    .footer-column-logo-icon {
      font-size: 24px;
      color: var(--primary-color);
    }

    .footer-column-logo span {
      background: var(--gradient);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .footer-column ul {
      list-style: none;
    }

    .footer-column ul li {
      margin-bottom: 10px;
    }

    .footer-column ul li a {
      color: #CED4DA;
      text-decoration: none;
      transition: var(--transition);
    }

    .footer-column ul li a:hover {
      color: var(--primary-color);
      text-decoration: none;
    }

    .copyright {
      text-align: center;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 13px;
    }

    .scroll-to-top {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--gradient);
      color: var(--light-color);
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
      z-index: 1000;
      cursor: pointer;
    }

    .scroll-to-top i {
      -webkit-text-stroke: 0;
      color: var(--light-color);
    }

    .scroll-to-top:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }

    .scroll-to-top.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    @media (max-width: 992px) {
      .search-bar {
        max-width: 180px;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 0 16px !important;
      }
      .header-container {
        padding: 12px 16px;
      }
      .mobile-menu-btn {
        display: block;
      }
      nav {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.98);
        padding: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        flex-direction: column;
        align-items: flex-start;
        border-radius: 0 0 12px 12px;
        border: 1px solid #e0e0e0;
        width: 100%;
        box-sizing: border-box;
      }
      nav.show {
        display: flex !important;
      }
      nav ul {
        flex-direction: column;
        gap: 18px;
        width: 100%;
      }
      nav ul li a {
        font-size: 18px;
        padding: 12px 20px;
        width: 100%;
        text-align: left;
        border-radius: 8px;
      }
      .search-bar {
        margin-top: 20px;
        width: 100%;
        max-width: none;
        padding: 10px 20px;
        border-radius: 50px;
      }
      .search-bar input {
        font-size: 15px;
        padding: 8px;
      }
      .search-bar button {
        font-size: 16px;
      }
      .tool-section {
        padding: 60px 0;
      }
      .tool-content h1 {
        font-size: 30px;
      }
    }

    @media (max-width: 576px) {
      .container {
        padding: 0 16px !important;
      }
      .header-container {
        padding: 10px 16px !important;
        margin: 0;
      }
      .logo {
        font-size: 20px;
        margin-left: 0;
      }
      .logo-icon {
        font-size: 20px;
      }
      .mobile-menu-btn {
        margin-right: 0;
      }
      .search-bar {
        padding: 8px 16px;
        margin: 16px 0;
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
      }
      .search-bar input {
        font-size: 14px;
      }
      .tool-content {
        padding: 24px;
      }
      .tool-content h1 {
        font-size: 26px;
      }
      .tool-content p, .tool-content .tool-article p, .tool-content .tool-article ul li {
        font-size: 14px;
      }
      .tool-content .tool-article h2 {
        font-size: 20px;
      }
      .tool-content .tool-article h3 {
        font-size: 18px;
      }
      .tool-content .upload-area {
        padding: 16px;
      }
      .tool-content .options-control {
        flex-direction: column;
        align-items: center;
      }
      .tool-content .options-control select,
      .tool-content .options-control input[type="number"],
      .tool-content .options-control input[type="range"] {
        width: 100%;
        padding: 10px 16px;
        font-size: 15px;
      }
      .tool-content .preview-box {
        min-width: 100%;
      }
      .tool-content .action-buttons {
        flex-direction: column;
        gap: 40px;
        margin-bottom: 24px;
      }
      .scroll-to-top {
        width: 40px;
        height: 40px;
        font-size: 20px;
        bottom: 16px;
        right: 16px;
      }
      .footer-column-logo {
        font-size: 20px;
      }
      .footer-column-logo-icon {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container header-container">
      <a href="/" class="logo">
        <i class="fas fa-tools logo-icon"></i>
        <span>Mass Tools</span>
      </a>
      <input id="mobile-menu-toggle" type="checkbox">
      <label class="mobile-menu-btn" for="mobile-menu-toggle">
        <i class="fas fa-bars"></i>
      </label>
      <nav id="nav-menu">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/#tools">Tools</a></li>
          <li><a href="/about-us.html">About Us</a></li>
          <li><a href="/contact-us.html">Contact Us</a></li>
          <li><a href="/privacy-policy.html">Privacy Policy</a></li>
          <li><a href="/terms-and-conditions.html">Terms</a></li>
          <li><a href="/Disclaimer.html">Disclaimer</a></li>
        </ul>
        <div class="search-bar">
          <input type="text" placeholder="Search tools..." aria-label="Search">
          <button type="submit" aria-label="Search">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="tool-section">
      <div class="container">
        <div class="tool-content">
          <h1>Image Compressor Tool</h1>
          <p>Compress images (JPG, PNG) with Mass Tools' free Image Compressor Tool. Reduce file size for web or sharing with adjustable quality, scale, or target size.</p>
          
          <div class="upload-area" id="uploadArea">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Drag and drop your image here or click to upload</p>
            <input type="file" id="imageInput" accept="image/*" aria-label="Upload image">
          </div>

          <div class="options-control">
            <div>
              <label for="quality">Quality (%):</label>
              <input type="range" id="quality" min="1" max="100" value="80" aria-label="Compression quality percentage">
              <span class="slider-value" id="qualityValue">80%</span>
            </div>
            <div>
              <label for="scale">Scale (%):</label>
              <input type="number" id="scale" min="1" max="100" value="100" aria-label="Scale percentage">
            </div>
            <div>
              <label for="targetSize">Target Size (KB):</label>
              <input type="number" id="targetSize" min="1" max="5000" placeholder="Optional" aria-label="Target file size in KB">
            </div>
            <div>
              <label for="outputFormat">Output Format:</label>
              <select id="outputFormat" aria-label="Select output format">
                <option value="original" selected>Same as Input</option>
                <option value="png">PNG</option>
                <option value="jpg">JPG</option>
              </select>
            </div>
          </div>

          <div class="preview-container">
            <div class="preview-box">
              <p>Original Image (<span id="originalSize">0 KB</span>)</p>
              <img id="originalPreview" alt="Original image preview">
            </div>
            <div class="preview-box">
              <p>Compressed Image (<span id="compressedSize">0 KB</span>, <span id="sizeReduction">0% smaller</span>)</p>
              <img id="compressedPreview" alt="Compressed image preview">
            </div>
          </div>

          <div class="action-buttons">
            <button id="compressBtn" disabled>Compress Image</button>
            <button id="downloadBtn" disabled>Download Compressed Image</button>
            <button id="resetBtn">Reset</button>
          </div>
          <p class="loading" id="loadingIndicator">Compressing...</p>

          <a class="cta-button" href="/index.html#tools">Explore Our Tools</a>

          <div class="tool-article">
            <h2>About the Image Compressor Tool</h2>
            <p>The Image Compressor Tool by <a href="/about-us.html">Mass Tools</a> is a free tool that reduces the file size of images (JPG, PNG, etc.) for web, email, or storage. It processes images in your browser using HTML5 Canvas, ensuring privacy and speed without server uploads.</p>
            
            <h3>Why Compress Images?</h3>
            <p>Compressing images reduces file size while maintaining acceptable quality. According to <a href="https://en.wikipedia.org/wiki/Image_compression" target="_blank" rel="noopener">Wikipedia</a>, image compression optimizes storage and transmission. Key benefits include:</p>
            <ul>
              <li><strong>Web Performance</strong>: Smaller images load faster on websites.</li>
              <li><strong>Email Sharing</strong>: Meet size limits for email attachments.</li>
              <li><strong>Storage Savings</strong>: Store more images in less space.</li>
              <li><strong>Social Media</strong>: Optimize images for platforms like Instagram.</li>
            </ul>

            <h3>How to Use the Image Compressor Tool</h3>
            <p>Our Image Compressor Tool is simple and customizable. Follow these steps:</p>
            <ul>
              <li><strong>Upload Your Image</strong>: Click the upload area or drag and drop your image (JPG, PNG, etc.).</li>
              <li><strong>Adjust Settings</strong>: Use the quality slider (1-100%), set scale (1-100%), or enter a target size (KB). Lower values reduce file size.</li>
              <li><strong>Choose Output Format</strong>: Keep the original format or select PNG/JPG.</li>
              <li><strong>Compress</strong>: Click "Compress Image" to process. Previews show original and compressed images with file sizes and reduction percentage.</li>
              <li><strong>Download</strong>: Click "Download Compressed Image" to save, named with "masstools.github.io" (e.g., compressed-image-masstools.github.io.jpg).</li>
              <li><strong>Reset</strong>: Click "Reset" to clear uploads and start over.</li>
            </ul>
            <p>The tool supports drag-and-drop and works offline after loading. Note: Lower quality or scale may affect image clarity; test outputs for balance.</p>

            <h3>Use Cases for Image Compression</h3>
            <p>The Image Compressor Tool is ideal for various scenarios, including:</p>
            <ul>
              <li><strong>Web Development</strong>: Optimize images for faster page loads.</li>
              <li><strong>E-commerce</strong>: Reduce product image sizes for online stores.</li>
              <li><strong>Social Media</strong>: Prepare images for Twitter, LinkedIn, or Facebook.</li>
              <li><strong>Personal Use</strong>: Compress photos for email or cloud storage.</li>
            </ul>

            <h3>Tips for Optimizing Compressed Images</h3>
            <p>To get the best results from image compression, consider these tips:</p>
            <ul>
              <li><strong>Smaller Images</strong>: Use images under 5MB for faster compression.</li>
              <li><strong>Quality Balance</strong>: Start with 80% quality for JPG; adjust using the slider.</li>
              <li><strong>Target Size</strong>: Set a target size for precise control (e.g., 500KB).</li>
              <li><strong>Scaling</strong>: Use scale <100% for additional size reduction.</li>
              <li><strong>Output Format</strong>: Choose JPG for smaller files, PNG for transparency.</li>
              <li><strong>Pre-Process</strong>: Crop or resize images using our <a href="/image-resizer-tool.html">Image Resizer Tool</a>.</li>
              <li><strong>Test Output</strong>: Verify compressed images in an image viewer.</li>
              <li><strong>Batch Processing</strong>: Need multiple images compressed? Contact us at <a href="mailto:byrolaa@gmail.com">byrolaa@gmail.com</a>.</li>
            </ul>

            <h3>Why Choose Mass Tools?</h3>
            <p>At Mass Tools, we provide free, high-quality tools to simplify your tasks. Our Image Compressor Tool joins our suite, including the <a href="/image-to-png-converter.html">Image to PNG Converter</a>, <a href="/image-to-jpg-converter.html">Image to JPG Converter</a>, <a href="/image-to-webp-converter.html">Image to WebP Converter</a>, <a href="/image-to-svg-converter.html">Image to SVG Converter</a>, <a href="/image-to-tiff-converter.html">Image to TIFF Converter</a>, <a href="/image-to-heic-converter.html">Image to HEIC Converter</a>, <a href="/image-to-pdf-converter.html">Image to PDF Converter</a>, <a href="/image-to-bmp-converter.html">Image to BMP Converter</a>, <a href="/image-to-ico-converter.html">Image to ICO Converter</a>, <a href="/image-to-avif-converter.html">Image to AVIF Converter</a>, <a href="/image-to-eps-converter.html">Image to EPS Converter</a>, <a href="/image-to-psd-converter.html">Image to PSD Converter</a>, <a href="/image-to-base64-converter.html">Image to Base64 Converter</a>, <a href="/image-to-dxf-converter.html">Image to DXF Converter</a>, <a href="/image-to-exr-converter.html">Image to EXR Converter</a>, <a href="/pdf-to-image-converter.html">PDF to Image Converter</a>, and <a href="/image-resizer-tool.html">Image Resizer Tool</a>. We prioritize privacy, speed, and ease of use. Learn more on our <a href="/about-us.html">About Us</a> page.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-container">
        <div class="footer-column">
          <a href="/" class="footer-column-logo">
            <i class="fas fa-tools footer-column-logo-icon"></i>
            <span>Mass Tools</span>
          </a>
          <p>Empowering you with free, high-quality online tools.</p>
        </div>
        <div class="footer-column">
          <ul>
            <li><a href="/#tools">Tools</a></li>
            <li><a href="/about-us.html">About Us</a></li>
            <li><a href="/contact-us.html">Contact Us</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <ul>
            <li><a href="/privacy-policy.html">Privacy Policy</a></li>
            <li><a href="/terms-and-conditions.html">Terms</a></li>
            <li><a href="/Disclaimer.html">Disclaimer</a></li>
          </ul>
        </div>
      </div>
      <div class="copyright">
        <p>© 2025 Mass Tools. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <button class="scroll-to-top" aria-label="Scroll to top">
    <i class="fas fa-arrow-up"></i>
  </button>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const menuToggle = document.getElementById('mobile-menu-toggle');
      const nav = document.getElementById('nav-menu');
      if (menuToggle && nav) {
        menuToggle.addEventListener('change', () => {
          nav.classList.toggle('show', menuToggle.checked);
        });
      }

      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
          e.preventDefault();
          const target = document.querySelector(anchor.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
          }
          if (nav && nav.classList.contains('show')) {
            nav.classList.remove('show');
            menuToggle.checked = false;
          }
        });
      });

      document.querySelectorAll('a[href*="#"]').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
          const href = anchor.getAttribute('href');
          const [path, hash] = href.split('#');
          const isHome = path === '/' || path === '' || path === '/index.html';
          if (isHome && hash && (window.location.pathname === '/' || window.location.pathname === '/index.html')) {
            e.preventDefault();
            const target = document.querySelector(`#${hash}`);
            if (target) {
              target.scrollIntoView({ behavior: 'smooth' });
              history.pushState(null, null, `/#${hash}`);
            }
          } else {
            window.location.href = href;
          }
          if (nav && nav.classList.contains('show')) {
            nav.classList.remove('show');
            menuToggle.checked = false;
          }
        });
      });

      const scrollTopBtn = document.querySelector('.scroll-to-top');
      if (scrollTopBtn) {
        window.addEventListener('scroll', () => {
          if (window.scrollY > 200) {
            scrollTopBtn.classList.add('show');
          } else {
            scrollTopBtn.classList.remove('show');
          }
        });
        scrollTopBtn.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      const searchInput = document.querySelector('.search-bar input');
      const searchButton = document.querySelector('.search-bar button');
      if (searchInput && searchButton) {
        const tools = [
          { name: 'Image To JPG Converter', url: '/image-to-jpg-converter.html' },
          { name: 'Image To PNG Converter', url: '/image-to-png-converter.html' },
          { name: 'Image To SVG', url: '/image-to-svg-converter.html' },
          { name: 'Image To WEBP Converter', url: '/image-to-webp-converter.html' },
          { name: 'Image To TIFF Converter', url: '/image-to-tiff-converter.html' },
          { name: 'Image To HEIC Converter', url: '/image-to-heic-converter.html' },
          { name: 'Image To PDF Converter', url: '/image-to-pdf-converter.html' },
          { name: 'Image To BMP Converter', url: '/image-to-bmp-converter.html' },
          { name: 'Image To ICO Converter', url: '/image-to-ico-converter.html' },
          { name: 'Image To AVIF Converter', url: '/image-to-avif-converter.html' },
          { name: 'Image To EPS Converter', url: '/image-to-eps-converter.html' },
          { name: 'Image To PSD Converter', url: '/image-to-psd-converter.html' },
          { name: 'Image To Base64 Converter', url: '/image-to-base64-converter.html' },
          { name: 'Image To DXF Converter', url: '/image-to-dxf-converter.html' },
          { name: 'Image To EXR Converter', url: '/image-to-exr-converter.html' },
          { name: 'PDF To Image Converter', url: '/pdf-to-image-converter.html' },
          { name: 'Image Resizer Tool', url: '/image-resizer-tool.html' },
          { name: 'Image Compressor Tool', url: '/image-compressor-tool.html' }
        ];
        searchButton.addEventListener('click', () => {
          const query = searchInput.value.trim().toLowerCase();
          const matchedTool = tools.find(tool => tool.name.toLowerCase().includes(query));
          if (matchedTool) {
            window.location.href = matchedTool.url;
          } else {
            alert('No tools found matching your search.');
          }
        });
        searchInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            searchButton.click();
          }
        });
      }

      const uploadArea = document.getElementById('uploadArea');
      const imageInput = document.getElementById('imageInput');
      const qualityInput = document.getElementById('quality');
      const qualityValue = document.getElementById('qualityValue');
      const scaleInput = document.getElementById('scale');
      const targetSizeInput = document.getElementById('targetSize');
      const outputFormatSelect = document.getElementById('outputFormat');
      const originalPreview = document.getElementById('originalPreview');
      const compressedPreview = document.getElementById('compressedPreview');
      const originalSizeSpan = document.getElementById('originalSize');
      const compressedSizeSpan = document.getElementById('compressedSize');
      const sizeReductionSpan = document.getElementById('sizeReduction');
      const compressBtn = document.getElementById('compressBtn');
      const downloadBtn = document.getElementById('downloadBtn');
      const resetBtn = document.getElementById('resetBtn');
      const loadingIndicator = document.getElementById('loadingIndicator');

      let originalImage = null;
      let compressedBlob = null;
      let originalWidth = 0;
      let originalHeight = 0;

      const formatFileSize = (bytes) => {
        if (bytes < 1024) return bytes + ' B';
        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB';
        return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
      };

      const resetForm = () => {
        originalImage = null;
        compressedBlob = null;
        originalWidth = 0;
        originalHeight = 0;
        imageInput.value = '';
        originalPreview.src = '';
        compressedPreview.src = '';
        originalPreview.classList.remove('visible');
        compressedPreview.classList.remove('visible');
        originalSizeSpan.textContent = '0 KB';
        compressedSizeSpan.textContent = '0 KB';
        sizeReductionSpan.textContent = '0% smaller';
        compressBtn.disabled = true;
        downloadBtn.disabled = true;
        qualityInput.value = '80';
        qualityValue.textContent = '80%';
        scaleInput.value = '100';
        targetSizeInput.value = '';
        outputFormatSelect.value = 'original';
        loadingIndicator.classList.remove('visible');
      };

      const handleFile = (file) => {
        if (!file) {
          alert('No file selected. Please upload an image.');
          return;
        }
        if (!file.type.startsWith('image/')) {
          alert('Please upload a valid image file (JPG, PNG, etc.).');
          return;
        }
        originalImage = file;
        compressBtn.disabled = false;
        downloadBtn.disabled = true;
        compressedPreview.src = '';
        compressedPreview.classList.remove('visible');
        originalSizeSpan.textContent = formatFileSize(file.size);

        const reader = new FileReader();
        reader.onload = (e) => {
          originalPreview.src = e.target.result;
          originalPreview.classList.add('visible');
          const img = new Image();
          img.src = e.target.result;
          img.onload = () => {
            originalWidth = img.width;
            originalHeight = img.height;
          };
        };
        reader.readAsDataURL(file);
      };

      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
      });

      uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('dragover');
      });

      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        const file = e.dataTransfer.files[0];
        handleFile(file);
      });

      uploadArea.addEventListener('click', () => {
        imageInput.click();
      });

      imageInput.addEventListener('change', () => {
        if (imageInput.files[0]) handleFile(imageInput.files[0]);
      });

      qualityInput.addEventListener('input', () => {
        qualityValue.textContent = `${qualityInput.value}%`;
      });

      compressBtn.addEventListener('click', () => {
        if (!originalImage) {
          alert('No image uploaded. Please upload an image first.');
          return;
        }

        if (originalImage.size > 5 * 1024 * 1024) {
          alert('Image is too large (over 5MB). Please use a smaller image.');
          return;
        }

        let quality = parseInt(qualityInput.value);
        const scale = parseInt(scaleInput.value);
        const targetSizeKB = parseInt(targetSizeInput.value) || null;

        if (!quality || quality < 1 || quality > 100) {
          alert('Please enter a valid quality percentage (1-100%).');
          return;
        }
        if (!scale || scale < 1 || scale > 100) {
          alert('Please enter a valid scale percentage (1-100%).');
          return;
        }
        if (targetSizeKB && (targetSizeKB < 1 || targetSizeKB > 5000)) {
          alert('Please enter a valid target size (1-5000 KB).');
          return;
        }

        loadingIndicator.classList.add('visible');
        compressBtn.disabled = true;

        const img = new Image();
        const reader = new FileReader();

        const compressImage = (currentQuality, currentScale, callback) => {
          const newWidth = Math.round(originalWidth * (currentScale / 100));
          const newHeight = Math.round(originalHeight * (currentScale / 100));
          const canvas = document.createElement('canvas');
          canvas.width = newWidth;
          canvas.height = newHeight;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0, newWidth, newHeight);

          const outputFormat = outputFormatSelect.value;
          let mimeType = originalImage.type;
          let extension = originalImage.name.split('.').pop().toLowerCase();
          if (outputFormat === 'png') {
            mimeType = 'image/png';
            extension = 'png';
          } else if (outputFormat === 'jpg') {
            mimeType = 'image/jpeg';
            extension = 'jpg';
          }

          const qualityValue = currentQuality / 100;
          canvas.toBlob((blob) => {
            callback(blob, extension);
          }, mimeType, mimeType === 'image/jpeg' ? qualityValue : 1);
        };

        const tryCompression = (currentQuality, currentScale, attemptsLeft, bestBlob, bestQuality, bestScale, callback) => {
          compressImage(currentQuality, currentScale, (blob, extension) => {
            const sizeKB = blob.size / 1024;
            if (!targetSizeKB || attemptsLeft <= 0 || Math.abs(sizeKB - targetSizeKB) < 10) {
              callback(blob, extension, currentQuality, currentScale);
            } else {
              const adjustment = sizeKB > targetSizeKB ? -10 : 10;
              const newQuality = Math.max(1, Math.min(100, currentQuality + adjustment));
              const newScale = currentScale;
              tryCompression(newQuality, newScale, attemptsLeft - 1, blob, newQuality, newScale, callback);
            }
          });
        };

        reader.onload = (e) => {
          img.src = e.target.result;
          img.onload = () => {
            try {
              if (targetSizeKB) {
                tryCompression(quality, scale, 10, null, quality, scale, (blob, extension, finalQuality, finalScale) => {
                  compressedBlob = blob;
                  compressedPreview.src = URL.createObjectURL(blob);
                  compressedPreview.classList.add('visible');
                  compressedSizeSpan.textContent = formatFileSize(blob.size);
                  const reduction = ((originalImage.size - blob.size) / originalImage.size * 100).toFixed(2);
                  sizeReductionSpan.textContent = `${reduction}% smaller`;
                  downloadBtn.disabled = false;
                  qualityInput.value = finalQuality;
                  qualityValue.textContent = `${finalQuality}%`;
                  scaleInput.value = finalScale;

                  if (window.gtag) {
                    gtag('event', 'compress_image', {
                      event_category: 'Tool Usage',
                      event_label: 'Image Compression',
                      value: finalQuality
                    });
                  }

                  loadingIndicator.classList.remove('visible');
                  compressBtn.disabled = false;
                });
              } else {
                compressImage(quality, scale, (blob, extension) => {
                  compressedBlob = blob;
                  compressedPreview.src = URL.createObjectURL(blob);
                  compressedPreview.classList.add('visible');
                  compressedSizeSpan.textContent = formatFileSize(blob.size);
                  const reduction = ((originalImage.size - blob.size) / originalImage.size * 100).toFixed(2);
                  sizeReductionSpan.textContent = `${reduction}% smaller`;
                  downloadBtn.disabled = false;

                  if (window.gtag) {
                    gtag('event', 'compress_image', {
                      event_category: 'Tool Usage',
                      event_label: 'Image Compression',
                      value: quality
                    });
                  }

                  loadingIndicator.classList.remove('visible');
                  compressBtn.disabled = false;
                });
              }
            } catch (error) {
              console.error('Compression error:', error);
              alert('Error compressing image. Please try again with a different image.');
              loadingIndicator.classList.remove('visible');
              compressBtn.disabled = false;
            }
          };
          img.onerror = () => {
            alert('Error loading image. Please try a different file.');
            loadingIndicator.classList.remove('visible');
            compressBtn.disabled = false;
          };
        };
        reader.readAsDataURL(originalImage);
      });

      downloadBtn.addEventListener('click', () => {
        if (!compressedBlob) return;

        const originalName = originalImage.name.split('.')[0];
        const outputFormat = outputFormatSelect.value;
        let extension = originalImage.name.split('.').pop().toLowerCase();
        if (outputFormat === 'png') extension = 'png';
        else if (outputFormat === 'jpg') extension = 'jpg';

        const downloadName = `compressed-${originalName}-masstools.github.io.${extension}`;
        const link = document.createElement('a');
        link.href = URL.createObjectURL(compressedBlob);
        link.download = downloadName;
        link.click();
        URL.revokeObjectURL(link.href);

        if (window.gtag) {
          gtag('event', 'download_compressed_image', {
            event_category: 'Tool Usage',
            event_label: 'Compressed Image Download',
            value: 1
          });
        }
      });

      resetBtn.addEventListener('click', resetForm);
    });
  </script>
</body>
</html>
